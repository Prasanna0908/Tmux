############################################################
# GENERAL
############################################################

set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",xterm-256color:Tc"

set -sg escape-time 0
set -g mouse on

set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on

set -g history-limit 50000
setw -g xterm-keys on

############################################################
# PANE LOOK (NO TOP BAR, CLEAN)
############################################################

set -g pane-border-style fg=colour238
set -g pane-active-border-style fg=colour82
set -g pane-border-status off

############################################################
# STATUS BAR (TOP, NEON GREEN THEME)
############################################################

set -g status on
set -g status-position top
set -g status-interval 10

# Neon green on deep black
set -g status-style bg=colour232,fg=colour82

# Left: session name
set -g status-left-length 40
set -g status-left "#[fg=colour82,bold]   #S #[default]"

# Windows (tabs)
setw -g window-status-style fg=colour244,bg=colour232
setw -g window-status-current-style fg=colour232,bg=colour82,bold

setw -g window-status-format " #I:#W "
setw -g window-status-current-format " #I:#W "

############################################################
# SVN INTEGRATION (QUIET, FAST)
############################################################

# SVN branch / URL tail
set -g @svn_branch 'svn info 2>/dev/null | sed -n "s|^URL: .*/||p"'

# SVN dirty indicator (only changed files)
set -g @svn_dirty 'svn st -q 2>/dev/null | grep -q . && echo "●"'

# Right: svn + dirty + time
set -g status-right-length 100
set -g status-right "#[fg=colour82]#(@svn_branch) #[fg=colour196]#(@svn_dirty)  #[fg=colour82]%H:%M "

############################################################
# COPY MODE – FIX PANE JUMPING
############################################################

# Prevent mouse selection from switching panes
unbind -n MouseDrag1Pane
bind -n MouseDrag1Pane if-shell -F "#{pane_in_mode}" \
  "send -X begin-selection" \
  "select-pane -t=; send -X begin-selection"

# Copy on mouse release, stay in same pane
unbind -n MouseDragEnd1Pane
bind -n MouseDragEnd1Pane send -X copy-selection

############################################################
# SMOOTH MOUSE SCROLL (NO CTRL-B)
############################################################

# Mouse wheel scrolls automatically
bind -n WheelUpPane if-shell -F "#{pane_in_mode}" \
  "send -X scroll-up" \
  "copy-mode -e; send -X scroll-up"

bind -n WheelDownPane if-shell -F "#{pane_in_mode}" \
  "send -X scroll-down" \
  "send -X scroll-down"

############################################################
# COPY MODE / MESSAGES STYLE
############################################################

setw -g mode-style bg=colour82,fg=colour232
set -g message-style bg=colour82,fg=colour232

############################################################
# WINDOW RENAMING (FIXED – MANUAL ONLY)
############################################################

# Manual rename stays forever
set -g allow-rename off
set -g automatic-rename off

############################################################
# CLOCK
############################################################

setw -g clock-mode-colour colour82
